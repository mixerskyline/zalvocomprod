<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Zalvo's คอมพ์รอด</title>
  <style>
    @font-face {
      font-family: 'CustomFont';
      src: url('font/font.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
    }

    body {
      margin: 0;
      height: 56.5vw; /* Increase height to allow scrolling */
      background: linear-gradient(to bottom, #0f0034, #98137c);
      display: flex;
      justify-content: center;
      align-items: flex-start; /* Align content to the top */
      font-family: 'CustomFont', sans-serif; /* Use the new font */
      overflow-y: auto; /* Enable vertical scrolling */
    }

    .tb {
      position: absolute; /* Use fixed positioning to keep it consistent across screen sizes */
      top: 2.5vw; /* Position relative to the viewport height */
      left: 2vw; /* Position relative to the viewport width */
      min-width: auto;
      min-height: auto;
      background-color: gray;
      color: black;
      padding: 0.2vw 1vw; /* Use relative padding */
      box-sizing: border-box;
      overflow: hidden;
      font-size: 2.5vw; /* Font size relative to viewport width */
      font-weight: bold;
      font-family: 'CustomFont', sans-serif;
    }
    .shadow-div {
    position: absolute;
    top: 0vw; /* Center vertically */
    left: 50vw; /* Center horizontally */
    width: 100vw; /* Full viewport width */
    height: 56.5vw; /* Set height */
    transform: translate(-50%, 0vw); /* Adjust position to center */  
    background-image: url('shadow/shadow.png'); /* Set the background image */
    box-sizing: border-box; /* Include padding and border in size */
    background-size: cover; /* Ensure the image covers the entire div */
    background-position: center; /* Center the image */
    background-repeat: no-repeat; /* Prevent image repetition */
    z-index: -1;
  }
    .tb[data-placeholder]:empty::before {
      content: attr(data-placeholder); /* Use the placeholder text */
      color: rgba(255, 255, 255, 0.5); /* Faint text color */
      pointer-events: none; /* Prevent interaction with the placeholder */
    }

    .hexagon {
      width: 6.8vw; /* Reduced width by 5px */
      height: 3.8vw; /* Reduced height by 5px */
      background-color: #031120; /* Hexagon color */
      position: relative;
      margin: 0.3vw; /* Space between hexagons */
      display: inline-block;
    }

    .hexagon:before,
    .hexagon:after {
      content: '';
      position: absolute;
      width: 0;
      border-left: 3.4vw solid transparent; /* Adjusted for reduced hexagon size */
      border-right: 3.4vw solid transparent; /* Adjusted for reduced hexagon size */
    }

    .hexagon:before {
      bottom: 100%;
      border-bottom: 2vw solid #031120; /* Adjusted for reduced hexagon size */
    }

    .hexagon:after {
      top: 100%;
      border-top: 2vw solid #031120; /* Adjusted for reduced hexagon size */
    }

    .comp {
  position: absolute;
  top: 5vw; /* Move it under the .tb element */
  left: 3vw; /* Adjust the left position */
  width: 57vw;
  height: 29.5vw;
  background-color: #0d2b50; /* Set the color */
  color: white;
  box-sizing: border-box;
  font-size: 0vw;
  font-family: 'CustomFont', sans-serif; /* Apply FC Friday font */
  display: flex;
  flex-wrap: wrap;
  justify-content: left;
  align-items: flex-start; /* Align items to the top */
  row-gap: 0px; /* Reduce vertical space between rows */
  padding-left: 0.7vw; /* Reduce left padding */
  padding-top: 3vw; /* Adjust padding to fit the design */
  padding-bottom: 1vw;
}

.hex-row {
  margin-left: 0; /* Remove any extra left margin */
}
    .hex-row.offset {
  margin-left: 3.7vw; /* Adjust this value to control the shift */
}

    .top-right-text {
      position: absolute;
      top: 2vw;
      right: 11.5vw;
      color: #c7b200;
      font-size: 3.5vw;
      font-weight: bold;
      font-family: 'CustomFont', sans-serif; /* Apply FC Friday font */
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 10); /* Add shadow under the text */
    }

    .cd {
      position: absolute;
      top: 2vw;
      left: 49vw;
      display: flex;
      gap: 1vw; /* Space between buttons */
    }

    .diffbut {
      width: 3vw; /* Set square width */
      height: 3vw; /* Set square height */
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'CustomFont', sans-serif;
      font-size: 1vw;
      font-weight: bold;
      color: white; /* Text color */
      border-radius: 5px; /* Slightly rounded corners */
      cursor: pointer; /* Pointer cursor for interactivity */
    }

    #diffbut1 {
      background-color: #00ff00; /* Green for Easy */
    }

    #diffbut2 {
      background-color: #ffff00; /* Yellow for Medium */
      color: black; /* Adjust text color for better contrast */
    }

    #diffbut3 {
      background-color: #ff0000; /* Red for Hard */
    }

    .ii {
      position: absolute;
      top: 7vw; /* Adjust position relative to viewport width */
      right: 4.5vw; /* Align to the top-right corner */
      width: 30vw; /* Set width */
      height: 6vw; /* Adjust height to fit squares */
      background-color: rgba(255, 87, 34, 0); /* Orange background with 50% transparency */
      color: white; /* Text color */
      font-family: 'CustomFont', sans-serif;
      font-size: 10vw;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: space-around; /* Space between squares */
    }

    .square {
      width: 5vw; /* Set square width */
      height: 5vw; /* Set square height */
      background-color: rgba(255, 255, 255, 0.3); /* Green background color */
      display: flex;
      align-items: center;
      justify-content: center;
      color: white; /* Text color */
      font-size: 16px;
      font-weight: bold;
      border-radius: 5px; /* Slightly rounded corners */
      background-size: cover; /* Ensure the image covers the square */
      background-position: center; /* Center the image */
      background-repeat: no-repeat; /* Prevent image repetition */
    }

    .square:nth-child(1) {
      background-image: url(); /* Replace with the path to your first image */
    }

    .square:nth-child(2) {
      background-image: url(); /* Replace with the path to your second image */
    }

    .square:nth-child(3) {
      background-image: url(); /* Replace with the path to your third image */
    }

    .square:nth-child(4) {
      background-image: url(); /* Replace with the path to your fourth image */
    }

    /* Style for the ss area */
#ss {
  position: fixed;
  top: 7vw;
  left: 35vw;
  width: 30vw;
  height: 20vw;
  background-color: rgba(0, 0, 0, 0.9);
  display: none; /* Initially hidden */
  flex-wrap: wrap;
  gap: 2vw 1vw;
  justify-content: center;
  align-items: center;
  padding: 2vw;
  padding-top: 3vw;
  padding-bottom: 3vw;
  box-sizing: border-box;
  overflow-y: auto;
  border-radius: 1vw;
  z-index: 2000; /* Increase z-index to ensure it appears in front */

}

/* Style for images in the ss area */
#ss img {
  width: 5vw;
  height: 5vw;
  object-fit: cover;
  cursor: pointer;
  border-radius: 0.5vw;
  transition: transform 0.2s ease;
}

#ss img:hover {
  transform: scale(1.1);
}

/* Highlight selected square */
.square.selected {
  border: 0.5vw solid #ffffff;
  box-sizing: border-box;
}

#draggable-container {
  position: absolute;
  top: 10vw; /* Initial position */
  left: 10vw; /* Initial position */
  width: 10vw; /* Set container width */
  height: auto; /* Maintain aspect ratio */
  cursor: grab; /* Indicate draggable behavior */
}

#draggable-image {
  width: 100%; /* Make the image fill the container */
  height: auto; /* Maintain aspect ratio */
  user-select: none; /* Prevent text selection while dragging */
}

#cmpa {
  position: absolute;
  top: 13vw; /* Position it vertically */
  left: 63vw; /* Position it on the right side */
  width: 16.5vw; /* Set the width */
  height: 42vw; /* Set the height */
  background-color: rgba(255, 255, 255, 0); /* Light background color */
  display: flex;
  flex-direction: column; /* Arrange squares vertically */
  justify-content: space-around; /* Space between squares */
  align-items: center; /* Center squares horizontally */
  padding: 1vw; /* Add padding inside the container */
  box-sizing: border-box;
  border-radius: 1vw; /* Add rounded corners */
  padding-top: 3vw; /* Adjust padding to fit the design */
  gap: 3vw;
}

.cmp-square {
  width: 14vw; /* Set square width */
  height: 11vw; /* Set square height */
  background-color: rgba(0, 0, 0, 0.5); /* Dark background color */
  background-size: contain; /* Ensure the image fits within the square */
  background-position: center; /* Center the image */
  background-repeat: no-repeat; /* Prevent image repetition */
}

#cmpi {
  position: absolute;
  top: 13vw; /* Align vertically with cmpa */
  left: 81vw; /* Position it to the right of cmpa */
  width: 16.5vw; /* Set the width */
  height: 42vw; /* Set the height */
  background-color: rgba(255, 255, 255, 0); /* Light background color */
  display: flex;
  flex-direction: column; /* Arrange squares vertically */
  justify-content: space-around; /* Space between squares */
  align-items: center; /* Center squares horizontally */
  padding: 1vw; /* Add padding inside the container */
  box-sizing: border-box;
  border-radius: 1vw; /* Add rounded corners */
  padding-top: 3vw; /* Adjust padding to fit the design */
  gap: 3vw;
}

#cmpi .cmii {
  width: 17vw; /* Set square width */
  height: 11vw; /* Set square height */
  background-color: rgba(0, 0, 0, 0); /* Dark background color */
  background-position: center; /* Center the image */
  background-repeat: no-repeat; /* Prevent image repetition */
}

.inner-square {
  width: 4vw; /* Set the width of each inner square */
  height: 4vw; /* Set the height of each inner square */
  background-color: rgba(255, 255, 255, 0.3); /* Light background color */
  margin: 0.4vw; /* Add spacing between squares */
  display: inline-block; /* Align squares horizontally */
  background-size: cover; /* Ensure the image covers the square */
  background-position: center; /* Center the image */
  background-repeat: no-repeat; /* Prevent image repetition */
  padding-top: 0.2vw; /* Adjust padding to fit the design */

}

#ci {
  position: absolute; /* Change to absolute for precise positioning */
  top: 15vw; /* Adjust vertical position to align with si1 */
  left: 23vw; /* Move ci closer to si1 */
  width: 40vw; /* Reduced width */
  height: 40vw; /* Reduced height */
  background-color: rgba(0, 0, 0, 0.9);
  display: none; /* Initially hidden */
  flex-wrap: wrap;
  gap: 0.8vw; /* Space between images */
  justify-content: center;
  align-items: flex-start; /* Align images to the top */
  padding: 2vw; /* Increased padding to add space at the top */
  box-sizing: border-box;
  z-index: 1000;
  overflow-y: auto;
  border-radius: 1vw;
}

/* Style for images in the ci area */
#ci img {
  width: 6vw; /* Reduced image width */
  height: 6vw; /* Reduced image height */
  object-fit: cover;
  cursor: pointer;
  border-radius: 0.5vw;
  transition: transform 0.2s ease;
}

#ci img:hover {
  transform: scale(1.1);
}

.inner-square.selected {
  border: 0.5vw solid #ffffff; /* White border */
  box-sizing: border-box; /* Ensure the border doesn't affect the square's size */
}

.bottom-left-text {
  position: absolute;
  top: 36vw; /* Position it near the bottom */
  left: 23vw; /* Position it near the left */
  color: #c7b200; /* Gold color */
  font-size: 4vw; /* Adjust font size */
  font-weight: bold; /* Bold text */
  font-family: 'CustomFont', sans-serif; /* Use the same font */
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 10); /* Add shadow under the text */
}



.power-snax {
  position: absolute;
  top: 35.9vw; /* Align with the bottom-left text */
  left: 41vw; /* Position it to the right of the bottom-left text */
  color: #c7b200; /* Gold color */
  font-size: 4vw; /* Adjust font size */
  font-weight: bold; /* Bold text */
  font-family: 'CustomFont', sans-serif; /* Use the same font */
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 10); /* Add shadow under the text */
}

.ps-rect {
  position: absolute;
  left: 41vw;
  width: 18vw;
  height: 4.5vw;
  background-color: rgba(0,0,0,0.5);
  border-radius: 0.5vw;
  margin-top: 0.7vw;
  box-sizing: border-box;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 5px 5px 10px 0px rgba(0, 0, 0, 0.5);
  font-size: 2vw; /* เพิ่มขนาด font ตามต้องการ */
  font-weight: bold;
}
#ps1 { top: 40vw; }
#ps2 { top: 45vw; }
#ps3 { top: 50vw; }


.bottom-left-square {
  position: absolute;
  top: 41vw; /* Position it below the bottom-left text */
  left: 23vw; /* Align it with the bottom-left text */
  width: 14vw; /* Set square width */
  height: 10.5vw; /* Set square height */
  background-color: rgba(0, 0, 0, 0.2); /* Dark background color */
  background-size: contain; /* Ensure the image fits within the square */
  background-position: center; /* Center the image */
  background-repeat: no-repeat; /* Prevent image repetition */
}
.bottom-left-blue-square {
  position: absolute;
  top: 36.5vw; /* Adjust distance from the bottom */
  left: 4vw; /* Adjust distance from the left */
  width: 16.5vw; /* Set the width of the square */
  height: 19vw; /* Set the height of the square */
  background-color: #0d2b50; /* Set the color to blue */
  border-radius: 0.5vw; /* Optional: Add rounded corners */
  padding-left: 1vw; /* Add space between the text and the edges */
  padding-top: 1vw;
  box-sizing: border-box; /* Ensure padding doesn't affect the size */
  color: white; /* Ensure text is visible */
  font-size: 1.8vw; /* Adjust font size */
  overflow-y: auto; /* Add scroll if content overflows */
  font-family: 'CustomFont', sans-serif;
}
  .itt {
    position: absolute;
    top: 49vw; /* Position it below the bottom-left text */
    left: 23vw; /* Align it with the bottom-left text */
    width: 14vw; /* Set square width */
    height: 5vw; /* Set square height */
    background-color: rgba(0, 0, 0, 0); /* Dark background color */
    display: flex; /* Enable flexbox */
    justify-content: center; /* Center the squares horizontally */
    align-items: center; /* Center the squares vertically */
    gap: 0.5vw; /* Add spacing between squares */
    font-family: 'CustomFont', sans-serif;
  }
.itt-square {
    width: 4vw; /* Set square width */
    height: 4vw; /* Set square height */
    background-color: rgba(255, 255, 255, 0.3); /* Light background color */
    margin: 0.5vw; /* Add spacing between squares */
    display: inline-block; /* Align squares horizontally */
    background-size: cover; /* Ensure the image covers the square */
    background-position: center; /* Center the image */
    background-repeat: no-repeat; /* Prevent image repetition */
    border-radius: 0.5vw; /* Slightly rounded corners */
  }

.cppu {
    position: absolute;
    right: 0.5vw;
    bottom: 0.3vw;
    width: 2vw;
    height: 1vw;
    background: #e0e0e0;
    border-radius: 0.2vw;
    font-size: 0.8vw;
    text-align: center;
    line-height: 1vw;
    z-index: 10; /* เปลี่ยนจาก 1 เป็น 10 */
}

.ps-circles {
  position: absolute;
  left: 40vw; /* อยู่หน้า ps1 ps2 ps3 */
  top: 40.7vw;  /* วงบนตรงกับ ps1 */
  width: 3vw;
  height: 14.8vw;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  align-items: center;
  z-index: 2;
}
.ps-circle {
  width: 4.1vw;
  height: 4.1vw;
  background: #c0c0c0;
  border-radius: 50%;
  box-shadow: 0 0 8px #fff2;
}

#psc1, #psc2, #psc3 {
  border: 0.3vw solid #fff;
  box-shadow: 0 0 1vw #fff5;
}

#emblemBut {
  background-color: #888; /* สีเทา */
  color: #fff;
}


  </style>
</head>
<body>
  <div id="hideButton" style="position: absolute; top: 1vw; right: 1vw; padding: 0.5vw 1vw; font-size: 1vw; background-color: #007bff; color: white; border: none; border-radius: 0.5vw; cursor: pointer; z-index: 2000;">Hide</div>
  <!-- วางไว้ก่อน <div class="cd"> -->
  <div class="ps-circles">
    <div class="ps-circle" id="psc1"></div>
    <div class="ps-circle" id="psc2"></div>
    <div class="ps-circle" id="psc3"></div>
  </div>
  <div class="cd">
    <div class="diffbut" id="emblemBut">emblem</div>
    <div class="diffbut" id="diffbut1">Easy</div>
    <div class="diffbut" id="diffbut2">Medium</div>
    <div class="diffbut" id="diffbut3">Hard</div>
  </div>

<div class="shadow-div"></div>
<div class="comp">
  <!-- Row 1 -->
  <div class="hex-row">
    <div class="hexagon" id="hex1"></div>
    <div class="hexagon" id="hex2"></div>
    <div class="hexagon" id="hex3"></div>
    <div class="hexagon" id="hex4"></div>
    <div class="hexagon" id="hex5"></div>
    <div class="hexagon" id="hex6"></div>
    <div class="hexagon" id="hex7"></div>
  </div>

  <!-- Row 2 (Shifted to the right) -->
  <div class="hex-row offset">
    <div class="hexagon" id="hex8"></div>
    <div class="hexagon" id="hex9"></div>
    <div class="hexagon" id="hex10"></div>
    <div class="hexagon" id="hex11"></div>
    <div class="hexagon" id="hex12"></div>
    <div class="hexagon" id="hex13"></div>
    <div class="hexagon" id="hex14"></div>
  </div>

  <!-- Row 3 -->
  <div class="hex-row">
    <div class="hexagon" id="hex15"></div>
    <div class="hexagon" id="hex16"></div>
    <div class="hexagon" id="hex17"></div>
    <div class="hexagon" id="hex18"></div>
    <div class="hexagon" id="hex19"></div>
    <div class="hexagon" id="hex20"></div>
    <div class="hexagon" id="hex21"></div>
  </div>

  <!-- Row 4 (Shifted to the right) -->
  <div class="hex-row offset">
    <div class="hexagon" id="hex22"></div>
    <div class="hexagon" id="hex23"></div>
    <div class="hexagon" id="hex24"></div>
    <div class="hexagon" id="hex25"></div>
    <div class="hexagon" id="hex26"></div>
    <div class="hexagon" id="hex27"></div>
    <div class="hexagon" id="hex28"></div>
  </div>
</div>
  <div class="tb" contenteditable="true" data-placeholder="Insert comp name"></div>
  <div class="top-right-text">ชิ้นส่วนสำคัญ</div>
  <div class="ii">
  <div class="square"></div>
  <div class="square"></div>
  <div class="square"></div>
  <div class="square"></div>
</div>
<div id="cmpa">
  <div class="cmp-square" id="cmp1"></div>
  <div class="cmp-square" id="cmp2"></div>
  <div class="cmp-square" id="cmp3"></div>
</div>
<div id="cmpi">
  <div class="cmii" id="si1">
    <div class="inner-square" id="sq1"></div>
    <div class="inner-square" id="sq2"></div>
    <div class="inner-square" id="sq3"></div>
    <div class="inner-square" id="sq4"></div>
    <div class="inner-square" id="sq5"></div>
    <div class="inner-square" id="sq6"></div>
  </div>
  <div class="cmii" id="si2">
    <div class="inner-square" id="sqq1"></div>
    <div class="inner-square" id="sqq2"></div>
    <div class="inner-square" id="sqq3"></div>
    <div class="inner-square" id="sqq4"></div>
    <div class="inner-square" id="sqq5"></div>
    <div class="inner-square" id="sqq6"></div>
  </div>
  <div class="cmii" id="si3">
    <div class="inner-square" id="sqqq1"></div>
    <div class="inner-square" id="sqqq2"></div>
    <div class="inner-square" id="sqqq3"></div>
    <div class="inner-square" id="sqqq4"></div>
    <div class="inner-square" id="sqqq5"></div>
    <div class="inner-square" id="sqqq6"></div>
  </div>
</div>
<div id="ci"></div>
<div class="bottom-left-text">ตัวถือของ</div>
<div class="power-snax">Power Snax</div>
<div class="ps-rect" id="ps1"></div>
<div class="ps-rect" id="ps2"></div>
<div class="ps-rect" id="ps3"></div>
<div class="bottom-left-square" id="itemp"></div>
<div class="bottom-left-blue-square"></div>
<div class="itt">
  <div class="itt-square" id="itt1"></div>
  <div class="itt-square" id="itt2"></div>
</div>
<!-- ปรับ style ของ searchbox ใน div#psca -->
<div id="psca" style="display:none; position:fixed; top:15vw; left:60vw; width:30vw; height:30vw; background:rgba(0,0,0,0.95); z-index:4000; border-radius:1vw; overflow-y:auto; padding:2vw;">
  <button id="psca-close" style="position:absolute; top:1vw; right:1vw; padding:0.5vw 1vw; font-size:1vw; background:#ff0000; color:#fff; border:none; border-radius:0.5vw; cursor:pointer;">Close</button>
  <div style="display:flex; justify-content:center; align-items:center; margin-bottom:1vw;">
    <input id="psca-search" type="text" placeholder="ค้นหาแชมป์..." style="width:70%; margin:0; padding:0.5vw; font-size:1vw; border-radius:0.5vw; border:1px solid #ccc;">
  </div>
  <div id="psca-list" style="display:flex; flex-wrap:wrap; gap:1vw; justify-content:center;"></div>
</div>

<script>


// --- Emblem Picker ---
const emblemNames = [
  "Duelist",
  "Strategist",
  "Protector",
  "Luchador",
  "Executioner",
  "Battle Academia",
  "Prodigy",
  "Supreme Cells",
  "Bastion",
  "Heavyweight",
  "Soul Fighter",
  "Sorcerer",
  "Crystal Gambit",
  "Sniper",
  "Juggernaut",
  "Wraith",
  "Star Guardian",
  "Edgelord"
];

const emblemPicker = document.createElement('div');
emblemPicker.id = 'emblem-picker';
emblemPicker.style.position = 'fixed';
emblemPicker.style.top = '5vw';
emblemPicker.style.left = '30vw';
emblemPicker.style.width = '40vw';
emblemPicker.style.height = '30vw';
emblemPicker.style.background = 'rgba(0,0,0,0.95)';
emblemPicker.style.zIndex = '5000';
emblemPicker.style.borderRadius = '1vw';
emblemPicker.style.overflowY = 'auto';
emblemPicker.style.display = 'none';
emblemPicker.style.flexDirection = 'column';
emblemPicker.style.alignItems = 'center';
emblemPicker.style.padding = '2vw';

// ปุ่มปิด
const emblemPickerClose = document.createElement('button');
emblemPickerClose.textContent = 'Close';
emblemPickerClose.style.position = 'absolute';
emblemPickerClose.style.top = '1vw';
emblemPickerClose.style.right = '1vw';
emblemPickerClose.style.padding = '0.5vw 1vw';
emblemPickerClose.style.fontSize = '1vw';
emblemPickerClose.style.backgroundColor = '#ff0000';
emblemPickerClose.style.color = '#fff';
emblemPickerClose.style.border = 'none';
emblemPickerClose.style.borderRadius = '0.5vw';
emblemPickerClose.style.cursor = 'pointer';
emblemPickerClose.onclick = () => emblemPicker.style.display = 'none';
emblemPicker.appendChild(emblemPickerClose);

// Search box
const emblemPickerSearch = document.createElement('input');
emblemPickerSearch.type = 'text';
emblemPickerSearch.placeholder = 'ค้นหา Emblem...';
emblemPickerSearch.style.width = '70%';
emblemPickerSearch.style.margin = '2vw 0 1vw 0';
emblemPickerSearch.style.padding = '0.5vw';
emblemPickerSearch.style.fontSize = '1vw';
emblemPickerSearch.style.borderRadius = '0.5vw';
emblemPickerSearch.style.border = '1px solid #ccc';
emblemPicker.appendChild(emblemPickerSearch);

// Container สำหรับ emblem images
const emblemPickerList = document.createElement('div');
emblemPickerList.style.display = 'flex';
emblemPickerList.style.flexWrap = 'wrap';
emblemPickerList.style.gap = '1vw';
emblemPickerList.style.justifyContent = 'center';
emblemPicker.appendChild(emblemPickerList);

document.body.appendChild(emblemPicker);

function renderEmblemPickerList() {
  const filter = emblemPickerSearch.value.toLowerCase();
  emblemPickerList.innerHTML = '';
  emblemNames.forEach((name, idx) => {
    if (!name.toLowerCase().includes(filter)) return;
    const div = document.createElement('div');
    div.style.width = '4vw';
    div.style.height = '6vw';
    div.style.display = 'flex';
    div.style.flexDirection = 'column';
    div.style.alignItems = 'center';
    div.style.justifyContent = 'center';
    div.style.background = '#888'; // พื้นหลังสีเทา
    div.style.borderRadius = '0.5vw';
    div.style.cursor = 'pointer';
    div.style.overflow = 'hidden';
    div.setAttribute('data-name', name);

    const img = document.createElement('img');
    img.src = `emblempic/${idx + 1}.png`;
    img.alt = name;
    img.style.width = '100%';
    img.style.height = '8vw';
    img.style.objectFit = 'cover';

    const label = document.createElement('div');
    label.textContent = name;
    label.style.color = '#fff';
    label.style.fontSize = '1vw';
    label.style.marginTop = '0.3vw';
    label.style.textAlign = 'center';
    label.style.textShadow = '1px 1px 2px #000';

    div.appendChild(img);
    div.appendChild(label);

        
        div.addEventListener('click', () => {
          emblemPicker.style.display = 'none';
        
          // Create draggable container (ลดขนาดกรอบ)
          const draggableContainer = document.createElement('div');
          draggableContainer.style.position = 'absolute';
          draggableContainer.style.left = '50vw';
          draggableContainer.style.top = '20vw';
          draggableContainer.style.width = '2vw';
          draggableContainer.style.height = '2vw';
          draggableContainer.style.zIndex = '1000';
          draggableContainer.style.display = 'flex';
          draggableContainer.style.justifyContent = 'center';
          draggableContainer.style.alignItems = 'center';
          draggableContainer.style.background = '#ffffff';
          draggableContainer.style.boxShadow = '0 0 1vw #0008';
        
          // Emblem image
          const dragImg = document.createElement('img');
          dragImg.src = `emblempic/${idx + 1}.png`;
          dragImg.alt = name;
          dragImg.style.width = '90%';
          dragImg.style.height = '90%';
          dragImg.style.objectFit = 'contain';
          dragImg.style.pointerEvents = 'none';
        
          // Emblem label
          const dragLabel = document.createElement('div');
          draggableContainer.appendChild(dragImg);
          draggableContainer.appendChild(dragLabel);
          document.body.appendChild(draggableContainer);
        
          // --- SNAP LOGIC: set initial position to nearest hexagon ---
          let closestHexagon = null;
          let closestDistance = Infinity;
          const hexagons = document.querySelectorAll('.comp .hexagon');
          hexagons.forEach((hexagon) => {
            const hexRect = hexagon.getBoundingClientRect();
            const hexCenterX = hexRect.left + hexRect.width / 2;
            const hexCenterY = hexRect.top + hexRect.height / 2;
            // Use window center for emblem initial position
            const emblemCenterX = window.innerWidth * 0.5;
            const emblemCenterY = window.innerWidth * 0.2;
            const distance = Math.sqrt(
              Math.pow(emblemCenterX - hexCenterX, 2) +
              Math.pow(emblemCenterY - hexCenterY, 2)
            );
            if (distance < closestDistance) {
              closestDistance = distance;
              closestHexagon = hexagon;
            }
          });
          if (closestHexagon) {
            const closestRect = closestHexagon.getBoundingClientRect();
            const hexCenterX = closestRect.left + closestRect.width / 2;
            const hexCenterY = closestRect.top + closestRect.height / 2;
            draggableContainer.style.left = `${hexCenterX - draggableContainer.offsetWidth / 2}px`;
            draggableContainer.style.top = `${hexCenterY - draggableContainer.offsetHeight / 2}px`;
          }
          // --- END SNAP LOGIC ---
        
          // Drag logic
          let isDragging = false;
          let offsetX = 0;
          let offsetY = 0;
        
          draggableContainer.addEventListener('mousedown', (e) => {
            isDragging = true;
            offsetX = e.clientX - draggableContainer.getBoundingClientRect().left;
            offsetY = e.clientY - draggableContainer.getBoundingClientRect().top;
            draggableContainer.style.cursor = 'grabbing';
          });
        
          document.addEventListener('mousemove', (e) => {
            if (isDragging) {
              draggableContainer.style.left = `${e.clientX - offsetX}px`;
              draggableContainer.style.top = `${e.clientY - offsetY}px`;
            }
          });
        
          document.addEventListener('mouseup', () => {
            if (isDragging) {
              isDragging = false;
              draggableContainer.style.cursor = 'grab';
        
              // --- SNAP LOGIC: snap to nearest hexagon after drag ---
              let closestHexagon = null;
              let closestDistance = Infinity;
              hexagons.forEach((hexagon) => {
                const hexRect = hexagon.getBoundingClientRect();
                const hexCenterX = hexRect.left + hexRect.width / 2;
                const hexCenterY = hexRect.top + hexRect.height / 2;
                const draggableRect = draggableContainer.getBoundingClientRect();
                const draggableCenterX = draggableRect.left + draggableRect.width / 2;
                const draggableCenterY = draggableRect.top + draggableRect.height / 2;
                const distance = Math.sqrt(
                  Math.pow(draggableCenterX - hexCenterX, 2) +
                  Math.pow(draggableCenterY - hexCenterY, 2)
                );
                if (distance < closestDistance) {
                  closestDistance = distance;
                  closestHexagon = hexagon;
                }
              });
              if (closestHexagon) {
                const closestRect = closestHexagon.getBoundingClientRect();
                const hexCenterX = closestRect.left + closestRect.width / 2;
                const hexCenterY = closestRect.top + closestRect.height / 2;
                // เพิ่ม offset ขึ้นบน เช่น 1vw (หรือปรับเป็น px ตามต้องการ)
                draggableContainer.style.left = `${hexCenterX - draggableContainer.offsetWidth / 2}px`;
                draggableContainer.style.top = `calc(${hexCenterY - draggableContainer.offsetHeight / 2}px - 3vw)`;
              }

              // --- END SNAP LOGIC ---
            }
          });
        
          // Right-click to remove
          draggableContainer.addEventListener('contextmenu', (e) => {
            e.preventDefault();
            draggableContainer.remove();
          });
        });
        
    emblemPickerList.appendChild(div);
  });
}
renderEmblemPickerList();

// Search event
emblemPickerSearch.addEventListener('input', renderEmblemPickerList);

// เปิด emblem picker เมื่อกดปุ่ม emblem
document.getElementById('emblemBut').addEventListener('click', () => {
  emblemPicker.style.display = 'flex';
  emblemPickerSearch.value = '';
  renderEmblemPickerList();
});


const champNames = [
  "Aatrox",
  "Ezreal",
  "Garen",
  "Gnar",
  "Kalista",
  "Kayle",
  "Kennen",
  "Lucian",
  "Malphite",
  "Naafiri",
  "Rell",
  "Sivir",
  "Syndra",
  "Zac",
  "Gangplank",
  "Janna",
  "Jhin",
  "Kaisa",
  "Katarina",
  "Kobuko",
  "Lux",
  "Mundo",
  "Rakan",
  "Shen",
  "Vi",
  "Xayah",
  "Xin Zhao",
  "Ahri",
  "Cait",
  "Darius",
  "Jayce",
  "Lulu",
  "Kogmaw",
  "Rammus",
  "Smolder",
  "Malzahar",
  "Neeko",
  "Senna",
  "Swain",
  "Udyr",
  "Viego",
  "Yasuo",
  "Ziggs",
  "Akali",
  "Ashe",
  "Jarvan",
  "Jinx",
  "K'sante",
  "Karma",
  "Leona",
  "Poppy",
  "Ryze",
  "Samira",
  "Sett",
  "Volibear",
  "Yuumi",
  "Braum",
  "Gwen",
  "Leesin",
  "Seraphine",
  "Twisted Fate",
  "Varus",
  "Yone",
  "Zyra"
];
const pscaList = document.getElementById('psca-list');
pscaList.innerHTML = '';
for (let i = 1; i <= champNames.length; i++) {
  const div = document.createElement('div');
  div.className = 'psca-item';
  div.setAttribute('data-name', champNames[i-1]);
  div.style.width = '8vw';
  div.style.height = '6vw';
  div.style.borderRadius = '0.5vw';
  div.style.overflow = 'hidden';
  div.style.display = 'flex';
  div.style.alignItems = 'center';
  div.style.justifyContent = 'center';
  div.style.background = '#222';
  div.style.cursor = 'pointer';
  const img = document.createElement('img');
  img.src = `champ/${i}.png`;
  img.alt = champNames[i-1];
  img.style.width = '100%';
  img.style.height = '100%';
  img.style.objectFit = 'cover';
  div.appendChild(img);
  pscaList.appendChild(div);
}


// ฟังก์ชันค้นหาใน psca
document.getElementById('psca-search').addEventListener('input', function() {
  const val = this.value.toLowerCase();
  document.querySelectorAll('.psca-item').forEach(item => {
    const name = item.getAttribute('data-name').toLowerCase();
    item.style.display = name.includes(val) ? 'flex' : 'none';
  });
});

// ปุ่มปิด
document.getElementById('psca-close').onclick = () => {
  document.getElementById('psca').style.display = 'none';
};


let currentPsc = null;

// เปิด psca เมื่อกด psc1, psc2, psc3 และจำ psc ที่เลือก
['psc1','psc2','psc3'].forEach(id => {
  const el = document.getElementById(id);
  if (el) {
    el.style.cursor = 'pointer';
    el.addEventListener('click', () => {
      document.getElementById('psca').style.display = 'block';
      currentPsc = el; // จำ psc ที่เลือก
    });
  }
});


// เมื่อเลือก item ใน psca ให้แสดงภาพจาก cpd ด้วยเลขเดียวกันใน psc ที่เลือก
document.querySelectorAll('.psca-item').forEach(item => {
  item.addEventListener('click', function() {
    if (currentPsc) {
      const img = this.querySelector('img');
      // ดึงเลขไฟล์จาก src เช่น champ/1.png
      const match = img.src.match(/(\d+)\.png$/);
      if (match) {
        const num = match[1];
        currentPsc.style.backgroundImage = `url('cpd/${num}.png')`;
        currentPsc.style.backgroundSize = 'cover';
        currentPsc.style.backgroundPosition = 'center';
        currentPsc.style.backgroundRepeat = 'no-repeat';
        document.getElementById('psca').style.display = 'none';
      }
    }
  });
});
// 1. สร้าง div power_snax และซ่อนเริ่มต้น
const powerSnaxDiv = document.createElement('div');
powerSnaxDiv.id = 'power_snax';
powerSnaxDiv.style.position = 'fixed';
powerSnaxDiv.style.top = '16vw';
powerSnaxDiv.style.left = '60vw';
powerSnaxDiv.style.width = '30vw';
powerSnaxDiv.style.height = '30vw';
powerSnaxDiv.style.background = 'rgba(0,0,0,0.95)';
powerSnaxDiv.style.zIndex = '3000';
powerSnaxDiv.style.display = 'none';
powerSnaxDiv.style.flexDirection = 'column';
powerSnaxDiv.style.alignItems = 'center';
powerSnaxDiv.style.padding = '2vw';
powerSnaxDiv.style.borderRadius = '1vw';
powerSnaxDiv.style.overflowY = 'auto';

// 2. ปุ่มปิด
const powerSnaxClose = document.createElement('button');
powerSnaxClose.textContent = 'Close';
powerSnaxClose.style.position = 'absolute';
powerSnaxClose.style.top = '1vw';
powerSnaxClose.style.right = '1vw';
powerSnaxClose.style.padding = '0.5vw 1vw';
powerSnaxClose.style.fontSize = '1vw';
powerSnaxClose.style.backgroundColor = '#ff0000';
powerSnaxClose.style.color = '#fff';
powerSnaxClose.style.border = 'none';
powerSnaxClose.style.borderRadius = '0.5vw';
powerSnaxClose.style.cursor = 'pointer';
powerSnaxClose.onclick = () => powerSnaxDiv.style.display = 'none';
powerSnaxDiv.appendChild(powerSnaxClose);

// 3. Search box
const powerSnaxSearch = document.createElement('input');
powerSnaxSearch.type = 'text';
powerSnaxSearch.placeholder = 'Search Power Snax...';
powerSnaxSearch.style.width = '80%';
powerSnaxSearch.style.margin = '2vw 0 1vw 0';
powerSnaxSearch.style.padding = '0.5vw';
powerSnaxSearch.style.fontSize = '1vw';
powerSnaxSearch.style.borderRadius = '0.5vw';
powerSnaxSearch.style.border = '1px solid #ccc';
powerSnaxDiv.appendChild(powerSnaxSearch);

// 4. List ตัวเลือก
const powerSnaxList = [
  "100 Push Ups","Adaptive Skin","All Out","Annihilation","Artistic KO","Atomic","Attack Expert","Best Defense","Bestest Boy","Bladenado","Blink Attack","Blood Brothers","Bludgeoner","Body Change","Bonus Bloom","Bullet Hell","Caretaker","Classy","Colossal","Corrosive","Crimson Veil","Critical Threat","Cyclone Rush","Dark Amulet","Demolitionist","Desperado","Doom Barrage","Doublestrike","Efficient","Essence Share","Fairy Tail","Fan Service","Final Ascent","Final Boss","Final Form","Finalist","Frost Touch","Fusion Dance","Gather Force","Gem Core","Golden Edge","Hat Trick","Heart of Gold","Hemorrhage","Hero's Arc","Hungry Hero","Hyperactive","Ice Bender","Inner Fire","Kahunahuna","Keen Eye","Killer Instinct","Living Wall","Mage","Magic Expert","Mana Rush","Mastermind","Max Arcana","Max Attack","Max Speed","Max Vitality","Mechador","Mech Pilot","Midas Touch","Mind Battery","Needlework","Not Done Yet","On The Edge","Ordinary","Over 9000","Pack Tactics","Power Font","Precision","Pure Heart","Pursuit","Ramping Rage","Rare Treat","Regenerative","Resistant","Rising Chaos","Robo Ranger","Round Two","Selfish","Serious Slam","Shadow Clone","Singularity","Sky Piercer","Socialite","Solar Breath","S.O.L.E. Fighter","Soul Chipper","Space Ace","Spiky Shell","Spirit Sword","Stand Alone","Stand United","Star Sailor","Star Student","Storm Bender","Stretchy Arms","Strong Spark","Super Genius","Supremacy","Surge 66","Tank-zilla","Thrillseeker","Tiny Terror","Trickster","Ultra Stance","Undefeated","Unflinching","Unstoppable","Warming Up","Weights"
];

// 5. Container สำหรับตัวเลือก
const powerSnaxOptions = document.createElement('div');
powerSnaxOptions.style.display = 'flex';
powerSnaxOptions.style.flexDirection = 'column';
powerSnaxOptions.style.width = '100%';
powerSnaxOptions.style.maxHeight = '22vw';
powerSnaxOptions.style.overflowY = 'auto';
powerSnaxDiv.appendChild(powerSnaxOptions);

// 6. ฟังก์ชัน render ตัวเลือก
function renderPowerSnaxOptions(filter = '') {
  powerSnaxOptions.innerHTML = '';
  powerSnaxList
    .filter(name => name.toLowerCase().includes(filter.toLowerCase()))
    .forEach(name => {
      const btn = document.createElement('button');
      btn.textContent = name;
      btn.style.margin = '0.2vw 0';
      btn.style.padding = '0.5vw 1vw';
      btn.style.fontSize = '1vw';
      btn.style.borderRadius = '0.5vw';
      btn.style.border = 'none';
      btn.style.background = '#222';
      btn.style.color = '#fff';
      btn.style.cursor = 'pointer';
      btn.onmouseover = () => btn.style.background = '#444';
      btn.onmouseout = () => btn.style.background = '#222';
      btn.onclick = () => {
        if (powerSnaxDiv.currentPs) {
          // ตั้งค่าเนื้อหา ps
          powerSnaxDiv.currentPs.textContent = name;
          powerSnaxDiv.currentPs.style.backgroundColor = '#0d2b50';
          powerSnaxDiv.currentPs.style.color = '#ffffff';
          powerSnaxDiv.currentPs.style.fontSize = '2vw';
          powerSnaxDiv.currentPs.style.fontWeight = 'bold';
  
        }
        powerSnaxDiv.style.display = 'none';
      };
      powerSnaxOptions.appendChild(btn);
    });
}
renderPowerSnaxOptions();

// 7. Event search
powerSnaxSearch.addEventListener('input', () => {
  renderPowerSnaxOptions(powerSnaxSearch.value);
});

// 8. ใส่ power_snax div ใน body
document.body.appendChild(powerSnaxDiv);

// 9. Event เปิด power_snax เมื่อคลิก ps1, ps2, ps3
['ps1', 'ps2', 'ps3'].forEach(id => {
  const ps = document.getElementById(id);
  if (ps) {
    ps.style.cursor = 'pointer';
    ps.addEventListener('click', () => {
      powerSnaxDiv.style.display = 'flex';
      powerSnaxDiv.currentPs = ps;
    });
  }
});

// 1. สร้าง div สำหรับเลือกแชมป์เปี้ยน (cmp-picker)
const cmpPicker = document.createElement('div');
cmpPicker.id = 'cmp-picker';
cmpPicker.style.position = 'fixed';
cmpPicker.style.top = '15vw';
cmpPicker.style.left = '23vw';
cmpPicker.style.width = '36vw';
cmpPicker.style.height = '30vw';
cmpPicker.style.background = 'rgba(0,0,0,0.95)';
cmpPicker.style.zIndex = '4000';
cmpPicker.style.borderRadius = '1vw';
cmpPicker.style.overflowY = 'auto';
cmpPicker.style.display = 'none';
cmpPicker.style.flexDirection = 'column';
cmpPicker.style.alignItems = 'center';
cmpPicker.style.padding = '2vw';

// ปุ่มปิด
const cmpPickerClose = document.createElement('button');
cmpPickerClose.textContent = 'Close';
cmpPickerClose.style.position = 'absolute';
cmpPickerClose.style.top = '1vw';
cmpPickerClose.style.right = '1vw';
cmpPickerClose.style.padding = '0.5vw 1vw';
cmpPickerClose.style.fontSize = '1vw';
cmpPickerClose.style.backgroundColor = '#ff0000';
cmpPickerClose.style.color = '#fff';
cmpPickerClose.style.border = 'none';
cmpPickerClose.style.borderRadius = '0.5vw';
cmpPickerClose.style.cursor = 'pointer';
cmpPickerClose.onclick = () => cmpPicker.style.display = 'none';
cmpPicker.appendChild(cmpPickerClose);

// Search box
const cmpPickerSearch = document.createElement('input');
cmpPickerSearch.type = 'text';
cmpPickerSearch.placeholder = 'ค้นหาแชมป์...';
cmpPickerSearch.style.width = '60%';
cmpPickerSearch.style.margin = '0vw 0 1vw 0';
cmpPickerSearch.style.padding = '0.5vw';
cmpPickerSearch.style.fontSize = '1vw';
cmpPickerSearch.style.borderRadius = '0.5vw';
cmpPickerSearch.style.border = '1px solid #ccc';
cmpPicker.appendChild(cmpPickerSearch);

// Container สำหรับรูป
const cmpPickerList = document.createElement('div');
cmpPickerList.style.display = 'flex';
cmpPickerList.style.flexWrap = 'wrap';
cmpPickerList.style.gap = '1vw';
cmpPickerList.style.justifyContent = 'center';
cmpPicker.appendChild(cmpPickerList);

document.body.appendChild(cmpPicker);

let currentCmpSquare = null;

// 2. Event เปิด cmp-picker เมื่อคลิก cmp1, cmp2, cmp3
['cmp1', 'cmp2', 'cmp3'].forEach(id => {
  const cmp = document.getElementById(id);
  if (cmp) {
    cmp.style.cursor = 'pointer';
    cmp.addEventListener('click', () => {
      cmpPicker.style.display = 'flex';
      currentCmpSquare = cmp;
      cmpPickerSearch.value = '';
      renderCmpPickerList();
    });
  }
});

function renderCmpPickerList() {
  const filter = cmpPickerSearch.value.toLowerCase();
  cmpPickerList.innerHTML = '';
  champNames.forEach((name, idx) => {
    if (!name.toLowerCase().includes(filter)) return;
    const div = document.createElement('div');
    div.style.width = '8vw';
    div.style.height = '6vw';
    div.style.display = 'flex';
    div.style.alignItems = 'center';
    div.style.justifyContent = 'center';
    div.style.background = '#222';
    div.style.borderRadius = '0.5vw';
    div.style.cursor = 'pointer';
    div.style.overflow = 'hidden';

    const img = document.createElement('img');
    img.src = `champ/${idx + 1}.png`;
    img.alt = name;
    img.style.width = '100%';
    img.style.height = '100%';
    img.style.objectFit = 'cover';

    div.appendChild(img);

    div.addEventListener('click', () => {
      if (currentCmpSquare) {
        currentCmpSquare.style.backgroundImage = `url(champ/${idx + 1}.png)`;
        currentCmpSquare.style.backgroundSize = 'contain';
        currentCmpSquare.style.backgroundPosition = 'center';
        currentCmpSquare.style.backgroundRepeat = 'no-repeat';
        cmpPicker.style.display = 'none';
      }
    });

    cmpPickerList.appendChild(div);
  });
}

// 4. Event ค้นหา
cmpPickerSearch.addEventListener('input', renderCmpPickerList);



// --- ITEM PICKER FOR itemp ---

// 1. สร้าง div สำหรับเลือกแชมป์เปี้ยน (itemp-picker)
const itempPicker = document.createElement('div');
itempPicker.id = 'itemp-picker';
itempPicker.style.position = 'fixed';
itempPicker.style.top = '15vw';
itempPicker.style.left = '38vw';
itempPicker.style.width = '35vw';
itempPicker.style.height = '30vw';
itempPicker.style.background = 'rgba(0,0,0,0.95)';
itempPicker.style.zIndex = '4000';
itempPicker.style.borderRadius = '1vw';
itempPicker.style.overflowY = 'auto';
itempPicker.style.display = 'none';
itempPicker.style.flexDirection = 'column';
itempPicker.style.alignItems = 'center';
itempPicker.style.padding = '2vw';

// ปุ่มปิด
const itempPickerClose = document.createElement('button');
itempPickerClose.textContent = 'Close';
itempPickerClose.style.position = 'absolute';
itempPickerClose.style.top = '1vw';
itempPickerClose.style.right = '1vw';
itempPickerClose.style.padding = '0.5vw 1vw';
itempPickerClose.style.fontSize = '1vw';
itempPickerClose.style.backgroundColor = '#ff0000';
itempPickerClose.style.color = '#fff';
itempPickerClose.style.border = 'none';
itempPickerClose.style.borderRadius = '0.5vw';
itempPickerClose.style.cursor = 'pointer';
itempPickerClose.onclick = () => itempPicker.style.display = 'none';
itempPicker.appendChild(itempPickerClose);

// Search box
const itempPickerSearch = document.createElement('input');
itempPickerSearch.type = 'text';
itempPickerSearch.placeholder = 'ค้นหาแชมป์...';
itempPickerSearch.style.width = '80%';
itempPickerSearch.style.margin = '2vw 0 1vw 0';
itempPickerSearch.style.padding = '0.5vw';
itempPickerSearch.style.fontSize = '1vw';
itempPickerSearch.style.borderRadius = '0.5vw';
itempPickerSearch.style.border = '1px solid #ccc';
itempPicker.appendChild(itempPickerSearch);

// Container สำหรับรูป
const itempPickerList = document.createElement('div');
itempPickerList.style.display = 'flex';
itempPickerList.style.flexWrap = 'wrap';
itempPickerList.style.gap = '1vw';
itempPickerList.style.justifyContent = 'center';
itempPicker.appendChild(itempPickerList);

document.body.appendChild(itempPicker);

// 2. Event เปิด itemp-picker เมื่อคลิก itemp
const itempDiv = document.getElementById('itemp');
if (itempDiv) {
  itempDiv.style.cursor = 'pointer';
  itempDiv.addEventListener('click', () => {
    itempPicker.style.display = 'flex';
    itempPickerSearch.value = '';
    renderItempPickerList();
  });
}

// 3. ฟังก์ชัน render รายการแชมป์เปี้ยน
function renderItempPickerList() {
  const filter = itempPickerSearch.value.toLowerCase();
  itempPickerList.innerHTML = '';
  champNames.forEach((name, idx) => {
    if (!name.toLowerCase().includes(filter)) return;
    const div = document.createElement('div');
    div.style.width = '8vw';
    div.style.height = '6vw';
    div.style.display = 'flex';
    div.style.alignItems = 'center';
    div.style.justifyContent = 'center';
    div.style.background = '#222';
    div.style.borderRadius = '0.5vw';
    div.style.cursor = 'pointer';
    div.style.overflow = 'hidden';

    const img = document.createElement('img');
    img.src = `champ/${idx + 1}.png`;
    img.alt = name;
    img.style.width = '100%';
    img.style.height = '100%';
    img.style.objectFit = 'cover';

    div.appendChild(img);

    div.addEventListener('click', () => {
      // ตั้งเป็น background ของ itemp
      itempDiv.style.backgroundImage = `url(champ/${idx + 1}.png)`;
      itempDiv.style.backgroundSize = 'contain';
      itempDiv.style.backgroundPosition = 'center';
      itempDiv.style.backgroundRepeat = 'no-repeat';
      itempPicker.style.display = 'none';
    });

    itempPickerList.appendChild(div);
  });
}

// 4. Event ค้นหา
itempPickerSearch.addEventListener('input', renderItempPickerList);

// Select the hide button and the .cd element
const hideButton = document.getElementById('hideButton');
const cdElement = document.querySelector('.cd');

// Function to hide the button and .cd
hideButton.addEventListener('click', () => {
  hideButton.style.display = 'none'; // Hide the button
  cdElement.style.display = 'none'; // Hide the .cd element
});

// Function to bring back the button and .cd when something is edited
function bringBackUI() {
  hideButton.style.display = 'block'; // Show the button
  cdElement.style.display = 'flex'; // Show the .cd element
}

// Add event listeners for interactions that bring back the UI
document.addEventListener('mousemove', (event) => {
  if (event.target.closest('div[style*="cpd/"]')) {
    bringBackUI(); // Bring back the UI when a draggable image is moved
  }
});

document.addEventListener('click', (event) => {
  if (event.target.closest('.ags img')) {
    bringBackUI(); // Bring back the UI when an image in ags is selected
  }
});

  
const championTraits = {
  "Aatrox": ["Mighty Mech", "Juggernaut", "Heavyweight"],
  "Ezreal": ["Battle Academia", "Protector"],
  "Garen": ["Battle Academia", "Bastion"],
  "Gnar": ["Luchador", "Sniper"],
  "Kalista": ["Soul Fighter", "Executioner"],
  "Kayle": ["Wraith", "Duelist"],
  "Kennen": ["Supreme Cells", "Sorcerer"],
  "Lucian": ["Mighty Mech", "Sorcerer"],
  "Malphite": ["The Crew", "Protector"],
  "Naafiri": ["Soul Fighter", "Juggernaut"],
  "Rell": ["Star Guardian", "Bastion"],
  "Sivir": ["The Crew", "Sniper"],
  "Syndra": ["Crystal Gambit", "Star Guardian", "Prodigy"],
  "Zac": ["Wraith", "Heavyweight"],
  "Gangplank": ["Mighty Mech", "Duelist"],
  "Janna": ["Crystal Gambit", "Protector", "Strategist"],
  "Jhin": ["Wraith", "Sniper"],
  "Kaisa": ["Supreme Cells", "Duelist"],
  "Katarina": ["Battle Academia", "Executioner"],
  "Kobuko": ["Mentor", "Heavyweight"],
  "Lux": ["Soul Fighter", "Sorcerer"],
  "Mundo": ["Luchador", "Juggernaut"],
  "Rakan": ["Battle Academia", "Protector"],
  "Shen": ["The Crew", "Bastion"],
  "Vi": ["Crystal Gambit", "Juggernaut"],
  "Xayah": ["Star Guardian", "Edgelord"],
  "Xin Zhao": ["Soul Fighter", "Bastion"],
  "Ahri": ["Star Guardian", "Sorcerer"],
  "Cait": ["Battle Academia", "Sniper"],
  "Darius": ["Supreme Cells", "Heavyweight"],
  "Jayce": ["Battle Academia", "Heavyweight"],
  "Kogmaw": ["Monster Trainer"],
  "Lulu": ["Monster Trainer"],
  "Malzahar": ["Wraith", "Prodigy"],
  "Neeko": ["Star Guardian", "Protector"],
  "Rammus": ["Monster Trainer"],
  "Senna": ["Mighty Mech", "Executioner"],
  "Smolder": ["Monster Trainer"],
  "Swain": ["Crystal Gambit", "Bastion", "Sorcerer"],
  "Udyr": ["Mentor", "Juggernaut", "Duelist"],
  "Viego": ["Soul Fighter", "Duelist"],
  "Yasuo": ["Mentor", "Edgelord"],
  "Ziggs": ["The Crew", "Strategist"],
  "Akali": ["Supreme Cells", "Executioner"],
  "Ashe": ["Crystal Gambit", "Duelist"],
  "Jarvan": ["Mighty Mech", "Strategist"],
  "Jinx": ["Star Guardian", "Sniper"],
  "Karma": ["Mighty Mech", "Sorcerer"],
  "Ksante": ["Wraith", "Protector"],
  "Leona": ["Battle Academia", "Bastion"],
  "Poppy": ["Star Guardian", "Heavyweight"],
  "Ryze": ["Mentor", "Executioner", "Strategist"],
  "Samira": ["Soul Fighter", "Edgelord"],
  "Sett": ["Soul Fighter", "Juggernaut"],
  "Volibear": ["Luchador", "Edgelord"],
  "Yuumi": ["Battle Academia", "Prodigy"],
  "Braum": ["The Champ", "Luchador", "Bastion"],
  "Gwen": ["Soul Fighter", "Sorcerer"],
  "Leesin": ["Stance Master"],
  "Seraphine": ["Star Guardian", "Prodigy"],
  "Twisted Fate": ["Rogue Captain", "The Crew"],
  "Varus": ["Wraith", "Sniper"],
  "Yone": ["Mighty Mech", "Edgelord"],
  "Zyra": ["Crystal Gambit", "Rosemother"]
};



const hexagonsInComp = document.querySelectorAll('.comp .hexagon');

// Create the cmpp area dynamically
const cmpp = document.createElement('div');
cmpp.id = 'cmpp';
cmpp.style.position = 'absolute';
cmpp.style.top = '5vw'; // Adjust vertical position
cmpp.style.left = '60vw'; // Adjust horizontal position
cmpp.style.width = '35vw'; // Set width
cmpp.style.height = '40vw'; // Set height
cmpp.style.backgroundColor = 'rgba(0, 0, 0, 0.9)';
cmpp.style.display = 'none'; // Initially hidden
cmpp.style.flexWrap = 'wrap';
cmpp.style.gap = '0.8vw'; // Space between images
cmpp.style.justifyContent = 'center';
cmpp.style.alignItems = 'flex-start'; // Align images to the top
cmpp.style.padding = '2vw';
cmpp.style.boxSizing = 'border-box';
cmpp.style.zIndex = '1000';
cmpp.style.overflowY = 'auto';
cmpp.style.borderRadius = '1vw';
document.body.appendChild(cmpp);

// Create and add the close button to the cmpp area
const cmppCloseButton = document.createElement('button');
cmppCloseButton.textContent = 'Close';
cmppCloseButton.style.position = 'fixed';
cmppCloseButton.style.top = '5vw';
cmppCloseButton.style.right = '7vw';
cmppCloseButton.style.padding = '0.5vw 1vw';
cmppCloseButton.style.fontSize = '1vw';
cmppCloseButton.style.backgroundColor = '#ff0000';
cmppCloseButton.style.color = '#ffffff';
cmppCloseButton.style.border = 'none';
cmppCloseButton.style.borderRadius = '0.5vw';
cmppCloseButton.style.cursor = 'pointer';
cmppCloseButton.addEventListener('click', () => {
  cmpp.style.display = 'none'; // Hide the cmpp area when the button is clicked
});
cmpp.appendChild(cmppCloseButton);

// Create a container for the search box
const cmppSearchContainer = document.createElement('div');
cmppSearchContainer.style.display = 'flex';
cmppSearchContainer.style.justifyContent = 'center';
cmppSearchContainer.style.alignItems = 'center';
cmppSearchContainer.style.marginBottom = '1vw';
cmppSearchContainer.style.width = '100%'; // Ensure it spans the full width
cmppSearchContainer.style.boxSizing = 'border-box';

// Create the search input
const cmppSearchInput = document.createElement('input');
cmppSearchInput.type = 'text';
cmppSearchInput.placeholder = 'Search by name or trait...';
cmppSearchInput.style.width = '20vw';
cmppSearchInput.style.padding = '0.5vw';
cmppSearchInput.style.fontSize = '1vw';
cmppSearchInput.style.borderRadius = '0.5vw';
cmppSearchInput.style.border = '1px solid #ccc';

cmppSearchContainer.appendChild(cmppSearchInput);
cmpp.appendChild(cmppSearchContainer); // Add the search container to cmpp

// Create a container for the images
const cmppImagesContainer = document.createElement('div');
cmppImagesContainer.style.display = 'flex';
cmppImagesContainer.style.flexWrap = 'wrap';
cmppImagesContainer.style.gap = '0.8vw'; // Space between images
cmppImagesContainer.style.justifyContent = 'center';
cmppImagesContainer.style.alignItems = 'flex-start';
cmppImagesContainer.style.width = '100%'; // Ensure it spans the full width
cmppImagesContainer.style.boxSizing = 'border-box';
cmpp.appendChild(cmppImagesContainer); // Add the images container to cmpp

// Add search functionality
cmppSearchInput.addEventListener('input', () => {
  const searchTerm = cmppSearchInput.value.toLowerCase();
  const images = cmppImagesContainer.querySelectorAll('img');

  images.forEach((img, index) => {
    const champName = champNames[index].toLowerCase();
    const champTraits = (championTraits[champNames[index]] || []).join(' ').toLowerCase();

    if (champName.includes(searchTerm) || champTraits.includes(searchTerm) || searchTerm === '') {
      img.style.display = 'block'; // Show matching images
    } else {
      img.style.display = 'none'; // Hide non-matching images
    }
  });
});

// Populate the cmppImagesContainer with images from the champ folder
for (let i = 1; i <= 64; i++) {
  const img = document.createElement('img');
  img.src = `champ/${i}.png`; // Path to the images
  img.alt = `Image ${i}`;
  img.style.width = '8vw'; // Set image width
  img.style.height = '6vw'; // Set image height
  img.style.objectFit = 'cover';
  img.style.cursor = 'pointer';
  img.style.borderRadius = '0.5vw';
  img.style.transition = 'transform 0.2s ease';
  img.addEventListener('mouseover', () => {
    img.style.transform = 'scale(1.1)';
  });
  img.addEventListener('mouseout', () => {
    img.style.transform = 'scale(1)';
  });
  img.addEventListener('click', () => {
    console.log(`Image ${i} clicked`);
    // Add any additional logic for image clicks here
  });
  cmppImagesContainer.appendChild(img); // Add images to the images container
}

// Add click event to each hexagon in the .comp area
hexagonsInComp.forEach((hexagon) => {
  hexagon.addEventListener('click', () => {
    cmpp.style.display = 'flex'; // Show the cmpp area
  });
});


  document.getElementById('diffbut1').addEventListener('click', () => {
  const tb = document.querySelector('.tb');
  tb.style.backgroundColor = '#00ff00'; // Green for Easy
  tb.textContent = tb.textContent.replace(/\(.*\)$/, '').trim() + ' (ง่าย)'; // Add suffix
});

document.getElementById('diffbut2').addEventListener('click', () => {
  const tb = document.querySelector('.tb');
  tb.style.backgroundColor = '#ffff00'; // Yellow for Medium
  tb.textContent = tb.textContent.replace(/\(.*\)$/, '').trim() + ' (ปานกลาง)'; // Add suffix
});

document.getElementById('diffbut3').addEventListener('click', () => {
  const tb = document.querySelector('.tb');
  tb.style.backgroundColor = '#ff0000'; // Red for Hard
  tb.textContent = tb.textContent.replace(/\(.*\)$/, '').trim() + ' (ยาก)'; // Add suffix
});

  // Prevent deletion of the suffix and ensure it stays at the end
  const tb = document.querySelector('.tb');
  tb.addEventListener('input', () => {
  const suffixMatch = tb.textContent.match(/\(.*\)$/);
  const suffix = suffixMatch ? suffixMatch[0] : '';
  const contentWithoutSuffix = suffix ? tb.textContent.slice(0, tb.textContent.length - suffix.length) : tb.textContent;
  tb.textContent = contentWithoutSuffix + suffix;
});

const squares = document.querySelectorAll('.ii .square');
let selectedSquareIndex = 0; // Start with the first square

// Create the ss area dynamically
const ss = document.createElement('div');
ss.id = 'ss';
document.body.appendChild(ss);

// Create and add the close button to the ss area
const closeButton = document.createElement('button');
closeButton.textContent = 'Close';
closeButton.style.position = 'absolute';
closeButton.style.top = '1vw';
closeButton.style.right = '1vw';
closeButton.style.padding = '0.5vw 1vw';
closeButton.style.fontSize = '1vw';
closeButton.style.backgroundColor = '#ff0000';
closeButton.style.color = '#ffffff';
closeButton.style.border = 'none';
closeButton.style.borderRadius = '0.5vw';
closeButton.style.cursor = 'pointer';
closeButton.addEventListener('click', () => {
  ss.style.display = 'none'; // Hide the ss area when the button is clicked

  // Remove the border from all squares
  squares.forEach(square => square.classList.remove('selected'));
});
ss.appendChild(closeButton);

// Populate the ss area with images
for (let i = 1; i <= 8; i++) {
  const img = document.createElement('img');
  img.src = `mati/${i}.png`; // Path to the images
  img.alt = `Image ${i}`;
  img.addEventListener('click', () => {
    if (selectedSquareIndex < squares.length) {
      // Set the selected image as the background of the current square
      const currentSquare = squares[selectedSquareIndex];
      currentSquare.style.backgroundImage = `url(${img.src})`;
      currentSquare.classList.remove('selected'); // Remove border from the current square

      // Move to the next square if it's not a re-selection
      if (selectedSquareIndex < squares.length - 1) {
        selectedSquareIndex++;
        squares[selectedSquareIndex].classList.add('selected'); // Add border to the next square
      } else {
        ss.style.display = 'none'; // Close the ss area if all squares are filled
      }
    }
  });
  ss.appendChild(img);
}

// Add click event to the squares to start the process
squares.forEach((square, index) => {
  square.addEventListener('click', () => {
    // Allow re-selection of a square
    selectedSquareIndex = index;

    // Highlight the current square
    squares.forEach(sq => sq.classList.remove('selected')); // Remove border from all squares
    square.classList.add('selected'); // Add border to the clicked square

    // Show the ss area
    ss.style.display = 'flex';
  });
});

const siSquares = document.querySelectorAll('#si1 .inner-square, #si2 .inner-square, #si3 .inner-square');
let selectedSquare = null;

// Create the ci area dynamically
const ci = document.createElement('div');
ci.id = 'ci';
document.body.appendChild(ci);

// Create and add the close button to the ci area
const ciCloseButton = document.createElement('button');
ciCloseButton.textContent = 'Close';
ciCloseButton.style.position = 'absolute';
ciCloseButton.style.top = '0.2vw';
ciCloseButton.style.right = '1vw';
ciCloseButton.style.padding = '0.5vw 1vw';
ciCloseButton.style.fontSize = '1vw';
ciCloseButton.style.backgroundColor = '#ff0000';
ciCloseButton.style.color = '#ffffff';
ciCloseButton.style.border = 'none';
ciCloseButton.style.borderRadius = '0.5vw';
ciCloseButton.style.cursor = 'pointer';
ciCloseButton.addEventListener('click', () => {
ci.style.display = 'none'; // Hide the ci area when the button is clicked
si1Squares.forEach(sq => sq.classList.remove('selected'));
});
ci.appendChild(ciCloseButton);

// Select all squares in si1
const si1Squares = document.querySelectorAll('#si1 .inner-square'); // Select all squares in si1
let selectedSi1SquareIndex = 0; // Start with the first square in si1

// Add click event to each square in si1
si1Squares.forEach((square, index) => {
  square.addEventListener('click', () => {
    // Remove the border from all squares in si1
    si1Squares.forEach(sq => sq.classList.remove('selected'));

    // Add a border to the clicked square
    square.classList.add('selected');

    // Set the clicked square as the selected square
    selectedSi1SquareIndex = index;

    // Show the ci area
    ci.style.display = 'flex';
  });
});

// Populate the ci area with images
for (let i = 1; i <= 36; i++) {
  const img = document.createElement('img');
  img.src = `image/${i}.jpg`; // Path to the images
  img.alt = `Image ${i}`;
  img.style.width = '6vw'; // Reduced image width
  img.style.height = '6vw'; // Reduced image height
  img.style.objectFit = 'cover';
  img.style.cursor = 'pointer';
  img.style.borderRadius = '0.5vw';
  img.style.transition = 'transform 0.2s ease';
  img.addEventListener('mouseover', () => {
    img.style.transform = 'scale(1.1)';
  });
  img.addEventListener('mouseout', () => {
    img.style.transform = 'scale(1)';
  });
  img.addEventListener('click', () => {
    if (selectedSi1SquareIndex < si1Squares.length) {
      // Set the selected image as the background of the current square
      const currentSquare = si1Squares[selectedSi1SquareIndex];
      currentSquare.style.backgroundImage = `url(${img.src})`;
      currentSquare.classList.remove('selected'); // Remove border from the current square

      // Move to the next square
      selectedSi1SquareIndex++;
      if (selectedSi1SquareIndex < si1Squares.length) {
        si1Squares[selectedSi1SquareIndex].classList.add('selected'); // Add border to the next square
      } else {
        ci.style.display = 'none'; // Close the ci area if all squares are filled
      }
    }
  });
  ci.appendChild(img);
}

// Initialize by adding a border to the first square

  // Create the ci2 area dynamically
  const ci2 = document.createElement('div');
  ci2.id = 'ci2';
  ci2.style.position = 'absolute';
  ci2.style.top = '15vw'; // Adjust vertical position
  ci2.style.left = '23vw'; // Adjust horizontal position
  ci2.style.width = '40vw'; // Set width
  ci2.style.height = '40vw'; // Set height
  ci2.style.backgroundColor = 'rgba(0, 0, 0, 0.9)';
  ci2.style.display = 'none'; // Initially hidden
  ci2.style.flexWrap = 'wrap';
  ci2.style.gap = '0.8vw'; // Space between images
  ci2.style.justifyContent = 'center';
  ci2.style.alignItems = 'flex-start'; // Align images to the top
  ci2.style.padding = '2vw';
  ci2.style.boxSizing = 'border-box';
  ci2.style.zIndex = '1000';
  ci2.style.overflowY = 'auto';
  ci2.style.borderRadius = '1vw';
  document.body.appendChild(ci2);

  // Create and add the close button to the ci2 area
  const ci2CloseButton = document.createElement('button');
  ci2CloseButton.textContent = 'Close';
  ci2CloseButton.style.position = 'absolute';
  ci2CloseButton.style.top = '0.2vw';
  ci2CloseButton.style.right = '1vw';
  ci2CloseButton.style.padding = '0.5vw 1vw';
  ci2CloseButton.style.fontSize = '1vw';
  ci2CloseButton.style.backgroundColor = '#ff0000';
  ci2CloseButton.style.color = '#ffffff';
  ci2CloseButton.style.border = 'none';
  ci2CloseButton.style.borderRadius = '0.5vw';
  ci2CloseButton.style.cursor = 'pointer';
  ci2CloseButton.addEventListener('click', () => {
  ci2.style.display = 'none'; // Hide the ci2 area when the button is clicked
  si2Squares.forEach(sq => sq.classList.remove('selected'));  
});
  ci2.appendChild(ci2CloseButton);

  // Select all squares in si2
  const si2Squares = document.querySelectorAll('#si2 .inner-square');
  let selectedSi2SquareIndex = 0; // Start with the first square in si2

  // Add click event to each square in si2
  si2Squares.forEach((square, index) => {
    square.addEventListener('click', () => {
      // Remove the border from all squares in si2
      si2Squares.forEach(sq => sq.classList.remove('selected'));

      // Add a border to the clicked square
      square.classList.add('selected');

      // Set the clicked square as the selected square
      selectedSi2SquareIndex = index;

      // Show the ci2 area
      ci2.style.display = 'flex';
    });
  });

  // Populate the ci2 area with images
  for (let i = 1; i <= 36; i++) {
    const img = document.createElement('img');
    img.src = `image/${i}.jpg`; // Path to the images
    img.alt = `Image ${i}`;
    img.style.width = '6vw'; // Reduced image width
    img.style.height = '6vw'; // Reduced image height
    img.style.objectFit = 'cover';
    img.style.cursor = 'pointer';
    img.style.borderRadius = '0.5vw';
    img.style.transition = 'transform 0.2s ease';
    img.addEventListener('mouseover', () => {
      img.style.transform = 'scale(1.1)';
    });
    img.addEventListener('mouseout', () => {
      img.style.transform = 'scale(1)';
    });
    img.addEventListener('click', () => {
      if (selectedSi2SquareIndex < si2Squares.length) {
        // Set the selected image as the background of the current square
        const currentSquare = si2Squares[selectedSi2SquareIndex];
        currentSquare.style.backgroundImage = `url(${img.src})`;
        currentSquare.classList.remove('selected'); // Remove border from the current square

        // Move to the next square
        selectedSi2SquareIndex++;
        if (selectedSi2SquareIndex < si2Squares.length) {
          si2Squares[selectedSi2SquareIndex].classList.add('selected'); // Add border to the next square
        } else {
          ci2.style.display = 'none'; // Close the ci2 area if all squares are filled
        }
      }
    });
    ci2.appendChild(img);
  }

  // Create the ci3 area dynamically
  const ci3 = document.createElement('div');
  ci3.id = 'ci3';
  ci3.style.position = 'absolute';
  ci3.style.top = '15vw'; // Adjust vertical position
  ci3.style.left = '23vw'; // Adjust horizontal position
  ci3.style.width = '40vw'; // Set width
  ci3.style.height = '40vw'; // Set height
  ci3.style.backgroundColor = 'rgba(0, 0, 0, 0.9)';
  ci3.style.display = 'none'; // Initially hidden
  ci3.style.flexWrap = 'wrap';
  ci3.style.gap = '0.8vw'; // Space between images
  ci3.style.justifyContent = 'center';
  ci3.style.alignItems = 'flex-start'; // Align images to the top
  ci3.style.padding = '2vw';
  ci3.style.boxSizing = 'border-box';
  ci3.style.zIndex = '1000';
  ci3.style.overflowY = 'auto';
  ci3.style.borderRadius = '1vw';
  document.body.appendChild(ci3);

  // Create and add the close button to the ci3 area
  const ci3CloseButton = document.createElement('button');
  ci3CloseButton.textContent = 'Close';
  ci3CloseButton.style.position = 'absolute';
  ci3CloseButton.style.top = '0.2vw';
  ci3CloseButton.style.right = '1vw';
  ci3CloseButton.style.padding = '0.5vw 1vw';
  ci3CloseButton.style.fontSize = '1vw';
  ci3CloseButton.style.backgroundColor = '#ff0000';
  ci3CloseButton.style.color = '#ffffff';
  ci3CloseButton.style.border = 'none';
  ci3CloseButton.style.borderRadius = '0.5vw';
  ci3CloseButton.style.cursor = 'pointer';
  ci3CloseButton.addEventListener('click', () => {
  ci3.style.display = 'none'; // Hide the ci3 area when the button is clicked
  si3Squares.forEach(sq => sq.classList.remove('selected'));
});
  ci3.appendChild(ci3CloseButton);

  // Select all squares in si3
  const si3Squares = document.querySelectorAll('#si3 .inner-square');
  let selectedSi3SquareIndex = 0; // Start with the first square in si3

  // Add click event to each square in si3
  si3Squares.forEach((square, index) => {
    square.addEventListener('click', () => {
      // Remove the border from all squares in si3
      si3Squares.forEach(sq => sq.classList.remove('selected'));

      // Add a border to the clicked square
      square.classList.add('selected');

      // Set the clicked square as the selected square
      selectedSi3SquareIndex = index;

      // Show the ci3 area
      ci3.style.display = 'flex';
    });
  });

  // Populate the ci3 area with images
  for (let i = 1; i <= 36; i++) {
    const img = document.createElement('img');
    img.src = `image/${i}.jpg`; // Path to the images
    img.alt = `Image ${i}`;
    img.style.width = '6vw'; // Reduced image width
    img.style.height = '6vw'; // Reduced image height
    img.style.objectFit = 'cover';
    img.style.cursor = 'pointer';
    img.style.borderRadius = '0.5vw';
    img.style.transition = 'transform 0.2s ease';
    img.addEventListener('mouseover', () => {
      img.style.transform = 'scale(1.1)';
    });
    img.addEventListener('mouseout', () => {
      img.style.transform = 'scale(1)';
    });
    img.addEventListener('click', () => {
      if (selectedSi3SquareIndex < si3Squares.length) {
        // Set the selected image as the background of the current square
        const currentSquare = si3Squares[selectedSi3SquareIndex];
        currentSquare.style.backgroundImage = `url(${img.src})`;
        currentSquare.classList.remove('selected'); // Remove border from the current square

        // Move to the next square
        selectedSi3SquareIndex++;
        if (selectedSi3SquareIndex < si3Squares.length) {
          si3Squares[selectedSi3SquareIndex].classList.add('selected'); // Add border to the next square
        } else {
          ci3.style.display = 'none'; // Close the ci3 area if all squares are filled
        }
      }
    });
    ci3.appendChild(img);
  }


  // Select all squares in the itt container
const ittSquares = document.querySelectorAll('.itt-square');

// Create the ittImageArea dynamically
const ittImageArea = document.createElement('div');
ittImageArea.id = 'ittImageArea';
ittImageArea.style.position = 'absolute';
ittImageArea.style.top = '15vw'; // Adjust vertical position
ittImageArea.style.left = '23vw'; // Adjust horizontal position
ittImageArea.style.width = '40vw'; // Set width
ittImageArea.style.height = '40vw'; // Set height
ittImageArea.style.backgroundColor = 'rgba(0, 0, 0, 0.9)';
ittImageArea.style.display = 'none'; // Initially hidden
ittImageArea.style.flexWrap = 'wrap';
ittImageArea.style.gap = '0.8vw'; // Space between images
ittImageArea.style.justifyContent = 'center';
ittImageArea.style.alignItems = 'flex-start'; // Align images to the top
ittImageArea.style.padding = '2vw';
ittImageArea.style.boxSizing = 'border-box';
ittImageArea.style.zIndex = '1000';
ittImageArea.style.overflowY = 'auto';
ittImageArea.style.borderRadius = '1vw';
document.body.appendChild(ittImageArea);

// Create and add the close button to the ittImageArea
const ittCloseButton = document.createElement('button');
ittCloseButton.textContent = 'Close';
ittCloseButton.style.position = 'absolute';
ittCloseButton.style.top = '0.2vw';
ittCloseButton.style.right = '1vw';
ittCloseButton.style.padding = '0.5vw 1vw';
ittCloseButton.style.fontSize = '1vw';
ittCloseButton.style.backgroundColor = '#ff0000';
ittCloseButton.style.color = '#ffffff';
ittCloseButton.style.border = 'none';
ittCloseButton.style.borderRadius = '0.5vw';
ittCloseButton.style.cursor = 'pointer';
ittCloseButton.addEventListener('click', () => {
  ittImageArea.style.display = 'none'; // Hide the ittImageArea when the button is clicked
});
ittImageArea.appendChild(ittCloseButton);

// Populate the ittImageArea with images from the image folder
for (let i = 1; i <= 36; i++) {
  const img = document.createElement('img');
  img.src = `image/${i}.jpg`; // Path to the images
  img.alt = `Image ${i}`;
  img.style.width = '6vw'; // Set image width
  img.style.height = '6vw'; // Set image height
  img.style.objectFit = 'cover';
  img.style.cursor = 'pointer';
  img.style.borderRadius = '0.5vw';
  img.style.transition = 'transform 0.2s ease';
  img.addEventListener('mouseover', () => {
    img.style.transform = 'scale(1.1)';
  });
  img.addEventListener('mouseout', () => {
    img.style.transform = 'scale(1)';
  });
  img.addEventListener('click', () => {
    if (selectedIttSquare) {
      // Set the selected image as the background of the clicked square
      selectedIttSquare.style.backgroundImage = `url(${img.src})`;
      selectedIttSquare.style.backgroundSize = 'contain'; // Ensure the image fits within the square
      selectedIttSquare.style.backgroundPosition = 'center'; // Center the image
      selectedIttSquare.style.backgroundRepeat = 'no-repeat'; // Prevent image repetition

      // Hide the ittImageArea after selecting an image
      ittImageArea.style.display = 'none';
    }
  });
  ittImageArea.appendChild(img);
};

// Add click event to each square in the itt container
let selectedIttSquare = null;
ittSquares.forEach((square) => {
  square.addEventListener('click', () => {
    selectedIttSquare = square; // Set the clicked square as the selected square
    ittImageArea.style.display = 'flex'; // Show the ittImageArea
  });
});

// Add click event to make images in cmpp draggable and use images from the cpd folder
// Mapping of image numbers to names

cmpp.addEventListener('click', (event) => {
  if (event.target.tagName === 'IMG') {
    const img = event.target;

    // Extract the image number from the clicked image's src
    const imgNumber = parseInt(img.src.match(/(\d+)\.png$/)[1], 10); // Extract the number from the filename
    const champName = champNames[imgNumber - 1]; // Get the corresponding name

    // Create the draggable container
    const draggableContainer = document.createElement('div');
    draggableContainer.style.position = 'absolute';
    draggableContainer.style.width = `6.7vw`; // Slightly larger than the hexagon width
    draggableContainer.style.height = `7.8vw`; // Slightly larger than the hexagon height
    draggableContainer.style.zIndex = '998'; // Set z-index lower than the image
    draggableContainer.style.clipPath = 'polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%)';
    draggableContainer.style.webkitClipPath = 'polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%)';
    draggableContainer.style.display = 'flex'; // Use flexbox to center the child
    draggableContainer.style.justifyContent = 'center'; // Center horizontally
    draggableContainer.style.alignItems = 'center'; // Center vertically
if (imgNumber >= 1 && imgNumber <= 14) {
      draggableContainer.style.backgroundColor = 'gray';
    } else if (imgNumber >= 15 && imgNumber <= 27) {
      draggableContainer.style.backgroundColor = 'green';
    } else if (imgNumber >= 28 && imgNumber <= 43) {
      draggableContainer.style.backgroundColor = '#4b80d6';
    } else if (imgNumber >= 44 && imgNumber <= 56) {
      draggableContainer.style.backgroundColor = 'purple';
    } else if (imgNumber >= 57 && imgNumber <= 64) {
      draggableContainer.style.backgroundColor = 'gold';
    }

    // Create the draggable hexagonal object
    const draggable = document.createElement('div');
    draggable.style.width = `6vw`; // Match the hexagon width
    draggable.style.height = `7vw`; // Match the hexagon height
    draggable.style.backgroundImage = `url(cpd/${imgNumber}.png)`; // Use the corresponding image from the cpd folder
    draggable.style.backgroundSize = 'cover';
    draggable.style.backgroundPosition = 'center';
    draggable.style.backgroundRepeat = 'no-repeat';
    draggable.style.cursor = 'grab';
    draggable.style.zIndex = '999'; // Set z-index higher than the stroke
    draggable.style.clipPath = 'polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%)';
    draggable.style.webkitClipPath = 'polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%)';

    // Add the draggable hexagon to the container
    draggableContainer.appendChild(draggable);

// Add a label to display the champion name
const label = document.createElement('div');
label.textContent = champName;
label.style.position = 'absolute';
label.style.top = '50%';
label.style.left = '50%';
label.style.transform = 'translate(-50%, -50%)';
label.style.color = 'white';
label.style.textShadow = `1px -1px 0 black,1px -1px 0 black,-1px 1px 0 black,1px 1px 0 black`; // Create an outer stroke effect
label.style.pointerEvents = 'none'; // Prevent interaction with the label
label.style.whiteSpace = 'nowrap'; // Ensure the text stays on the same line

// Adjust font size based on the length of the text
if (champName.length > 9) {
  label.style.fontSize = '1vw'; // Smaller font size for longer names
} else {
  label.style.fontSize = '1.5vw'; // Default font size for shorter names
}

draggable.appendChild(label);

// Append the draggable container to the document body
document.body.appendChild(draggableContainer);

    // Add dragging functionality to the container
    let isDragging = false;
    let offsetX = 0;
    let offsetY = 0;


// Call updateSharedTraits where necessary
cmpp.addEventListener('click', (event) => {
  if (event.target.tagName === 'IMG') {
    setTimeout(updateSharedTraits, 100); // Delay to ensure draggable is added
  }
});



document.addEventListener('contextmenu', (event) => {
  if (event.target.closest('div[style*="cpd/"]')) {
    setTimeout(updateSharedTraits, 100); // Delay to ensure draggable is removed
  }
});

    // Find the nearest hexagon in the .comp area
    let closestHexagon = null;
    let closestDistance = Infinity;

    const hexagons = document.querySelectorAll('.comp .hexagon');
    hexagons.forEach((hexagon) => {
      const hexRect = hexagon.getBoundingClientRect();
      const hexCenterX = hexRect.left + hexRect.width / 2;
      const hexCenterY = hexRect.top + hexRect.height / 2;

      const imgRect = img.getBoundingClientRect();
      const imgCenterX = imgRect.left + imgRect.width / 2;
      const imgCenterY = imgRect.top + imgRect.height / 2;

      const distance = Math.sqrt(
        Math.pow(imgCenterX - hexCenterX, 2) +
        Math.pow(imgCenterY - hexCenterY, 2)
      );

      if (distance < closestDistance) {
        closestDistance = distance;
        closestHexagon = hexagon;
      }
    });

    // Set the draggable container's initial position to the center of the nearest hexagon
    if (closestHexagon) {
      const closestRect = closestHexagon.getBoundingClientRect();
      const hexCenterX = closestRect.left + closestRect.width / 2;
      const hexCenterY = closestRect.top + closestRect.height / 2;

      // Adjust the draggable container's position to center it on the hexagon
      draggableContainer.style.left = `${hexCenterX - draggableContainer.offsetWidth / 2}px`;
      draggableContainer.style.top = `${hexCenterY - draggableContainer.offsetHeight / 2}px`;
    }

    // Snap the draggable container to the nearest hexagon after dragging
    document.addEventListener('mouseup', () => {
      if (isDragging) {
        isDragging = false;
        draggable.style.cursor = 'grab';

        // Find the nearest hexagon again after dragging
        let closestHexagon = null;
        let closestDistance = Infinity;

        hexagons.forEach((hexagon) => {
          const hexRect = hexagon.getBoundingClientRect();
          const hexCenterX = hexRect.left + hexRect.width / 2;
          const hexCenterY = hexRect.top + hexRect.height / 2;

          const draggableRect = draggableContainer.getBoundingClientRect();
          const draggableCenterX = draggableRect.left + draggableRect.width / 2;
          const draggableCenterY = draggableRect.top + draggableRect.height / 2;

          const distance = Math.sqrt(
            Math.pow(draggableCenterX - hexCenterX, 2) +
            Math.pow(draggableCenterY - hexCenterY, 2)
          );

          if (distance < closestDistance) {
            closestDistance = distance;
            closestHexagon = hexagon;
          }
        });

        // Snap the draggable container to the center of the nearest hexagon
        if (closestHexagon) {
          const closestRect = closestHexagon.getBoundingClientRect();
          const hexCenterX = closestRect.left + closestRect.width / 2;
          const hexCenterY = closestRect.top + closestRect.height / 2;

          draggableContainer.style.left = `${hexCenterX - draggableContainer.offsetWidth / 2}px`;
          draggableContainer.style.top = `${hexCenterY - draggableContainer.offsetHeight / 2}px`;
        }
      }
    });


    draggableContainer.addEventListener('mousedown', (e) => {
      isDragging = true;
      offsetX = e.clientX - draggableContainer.getBoundingClientRect().left;
      offsetY = e.clientY - draggableContainer.getBoundingClientRect().top;
      draggable.style.cursor = 'grabbing';
    });

    document.addEventListener('mousemove', (e) => {
      if (isDragging) {
        draggableContainer.style.left = `${e.clientX - offsetX}px`;
        draggableContainer.style.top = `${e.clientY - offsetY}px`;
      }
    });

    document.addEventListener('mouseup', () => {
      if (isDragging) {
        isDragging = false;
        draggable.style.cursor = 'grab';
      }
    });

    // Right-click to remove the draggable container
    draggableContainer.addEventListener('contextmenu', (e) => {
      e.preventDefault();
      draggableContainer.remove();
    });
  }
});

function updateSharedTraits() {
  const displayedChampions = new Set();
  const sharedTraits = {};
  const traitChampionMap = {};

  const traitLevels = {

    "Battle Academia": [3, 5, 7],
    "Crystal Gambit": [3, 5, 7],
    "Luchador": [2, 4],
    "Mentor": [1, 4],
    "Mighty Mech": [3, 5, 7],
    "Monster Trainer": [1],
    "Soul Fighter": [2, 4, 6, 8],
    "Star Guardian": [1, 4, 6, 10],
    "Supreme Cells": [2, 3, 4],
    "The Crew": [1, 2, 3, 4, 5],
    "Wraith": [2, 4, 6],
    "Bastion": [2, 4, 6],
    "Duelist": [2, 4, 6],
    "Executioner": [2, 3, 4, 5],
    "Heavyweight": [2, 4, 6],
    "Juggernaut": [2, 4, 6],
    "Prodigy": [2, 3, 4, 5],
    "Protector": [2, 4, 6],
    "Sniper": [2, 3, 3, 5],
    "Sorcerer": [2, 4, 6],
    "Strategist": [2, 3, 4, 5],
    "The Champ": [1],
    "Stance Master": [1],
    "Rogue Captain": [1],
    "Rosemother": [1]
  };

  
 const draggableContainers = document.querySelectorAll('div[style*="cpd/"]');
  draggableContainers.forEach((container) => {
    const backgroundImage = container.style.backgroundImage;
    const match = backgroundImage.match(/cpd\/(\d+)\.png/); // Extract the image number
    if (match) {
      const imgNumber = parseInt(match[1], 10);
      const champName = champNames[imgNumber - 1];
      displayedChampions.add(champName);

      // Add traits of the champion to the sharedTraits object
      const traits = championTraits[champName] || [];
      traits.forEach((trait) => {
        if (!traitChampionMap[trait]) {
          traitChampionMap[trait] = new Set(); // Initialize a set for each trait
        }
        traitChampionMap[trait].add(champName); // Add the champion to the trait's set
      });
    }
  });

  // --- นับ emblem เพิ่มเข้าไปใน sharedTraits ---
  Object.entries(traitChampionMap).forEach(([trait, champions]) => {
    // นับจำนวน champion + จำนวน Emblem (ถ้ามี)
    let count = 0;
    champions.forEach(name => {
      if (name === "emblem") count += 1;
      else count += 1;
    });
    sharedTraits[trait] = count;
  });

  // Filter traits that meet or exceed the minimum required level
  const filteredTraits = Object.entries(sharedTraits)
    .filter(([trait, count]) => {
      const levels = traitLevels[trait] || [];
      return levels.some(level => count >= level); // Check if the count meets or exceeds any level
    })
    .map(([trait, count]) => {
      const levels = traitLevels[trait] || [];
      let levelIndex = levels.findIndex(level => count < level) - 1;
      if (levelIndex === -2) levelIndex = levels.length - 1; // If count exceeds all levels, use the highest level

      // Determine the level image
      let levelImageSrc = '';
      if (trait === "The Champ" || trait === "Rogue Captain" || trait === "Stance Master" || trait === "Rosemother") {
        levelImageSrc = 'level/un.png'; // Use "un.png" for these traits
      } else if ((trait === "Nitro" || trait === "Marksman") && levelIndex === 1) {
        levelImageSrc = 'level/gold.png'; // Use "gold.png" for Nitro and Marksman at level 2
      } else {
        if (levelIndex === 0) levelImageSrc = 'level/bronze.png';
        else if (levelIndex === 1) levelImageSrc = 'level/silver.png';
        else if (levelIndex === 2) levelImageSrc = 'level/gold.png';
        else if (levelIndex >= 3) levelImageSrc = 'level/pris.png';
      }

      // Determine the trait logo image
      const traitLogoSrc = `trait/${trait}.png`;

      // Replace "AMP" with "A.M.P" for display
      const displayTrait = trait === "AMP" ? "A.M.P" : trait;

      return { trait: displayTrait, count, levelImageSrc, traitLogoSrc };
    });

  // Sort traits by priority, count, and level
  filteredTraits.sort((a, b) => {
    const priorityTraits = ["The Champ", "Rogue Captain", "Stance Master", "Rosemother"];
    const aPriority = priorityTraits.includes(a.trait) ? 1 : 0;
    const bPriority = priorityTraits.includes(b.trait) ? 1 : 0;

    if (aPriority !== bPriority) {
      return bPriority - aPriority; // Priority traits come first
    }

    if (b.count !== a.count) {
      return b.count - a.count; // Sort by count in descending order
    }

    // If counts are equal, sort by level (higher level first)
    const levelOrder = ["bronze.png", "silver.png", "gold.png", "pris.png", "un.png"];
    const aLevelIndex = levelOrder.indexOf(a.levelImageSrc.split('/').pop());
    const bLevelIndex = levelOrder.indexOf(b.levelImageSrc.split('/').pop());
    return bLevelIndex - aLevelIndex; // Higher level comes first
  });

  // Update the bottom-left blue square with shared traits, one per row
  const blueSquare = document.querySelector('.bottom-left-blue-square');
  if (filteredTraits.length > 0) {
    // Adjust font size and image size dynamically
    const fontSize = filteredTraits.length >= 8 ? '1.2vw' : '1.8vw';
    const imageSize = filteredTraits.length >= 8 ? '1.5vw' : '2vw';
    const logoSize = filteredTraits.length >= 8 ? '1.05vw' : '1.4vw';

    blueSquare.innerHTML = filteredTraits.map(({ trait, count, levelImageSrc, traitLogoSrc }) => `
      <div style="display: flex; align-items: center; margin-bottom: 0.5vw;">
        <div style="position: relative; width: ${imageSize}; height: ${imageSize}; margin-right: 0.5vw;">
          <img src="${levelImageSrc}" alt="Level" style="width: 100%; height: 100%; position: absolute; top: 0; left: 0;">
          <img src="${traitLogoSrc}" alt="${trait}" style="width: ${logoSize}; height: ${logoSize}; position: absolute; top: 15%; left: 15%;">
        </div>
        <span style="font-size: ${fontSize};">${count} ${trait}</span>
      </div>
    `).join('');

    // Apply the font size to the blue square
    blueSquare.style.fontSize = fontSize;
  } else {
    blueSquare.innerHTML = ''; // Clear the content if no shared traits
  }
}



// Add search functionality
agsSearchInput.addEventListener('input', () => {
  const searchTerm = agsSearchInput.value.toLowerCase();
  const images = agsImagesContainer.querySelectorAll('img');

  images.forEach((img) => {
    const altText = img.alt.toLowerCase();
    if (altText.includes(searchTerm) || searchTerm === '') {
      img.style.display = 'block'; // Show matching images
    } else {
      img.style.display = 'none'; // Hide non-matching images
    }
  });
});

</script>
</body>
</html>
